import xapi from 'xapi';

// Function to log events with detailed information
function logEvent(eventName, data) {
  console.log(`[${eventName}] Event Data:`, JSON.stringify(data, null, 2));
}

// Capture when any macro is started
xapi.Event.Macro.Started.on((event) => {
  logEvent('Macro Started', event);
});

// Capture when any macro is stopped
xapi.Event.Macro.Stopped.on((event) => {
  logEvent('Macro Stopped', event);
});

// Capture errors generated by macros
xapi.Event.Macro.Error.on((event) => {
  logEvent('Macro Error', event);
});

// Capture changes to macro configuration
xapi.Status.Macro.On.on((status) => {
  logEvent('Macro Status', status);
});

console.log('Macro Event Debugger is running. Start or stop any macro to capture events.');
